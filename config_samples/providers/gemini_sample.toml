# Sample configuration file for gemini.toml
# This is a sanitized version with sensitive values masked
# Replace <your-*> placeholders with your actual values
# Comments below explain what each setting does

# API endpoint URL for this provider
endpoint = "https://generativelanguage.googleapis.com"

# API key for authentication - replace with your actual key
api_key = "<your-api-key>"

# List of available models (auto-populated by the tool)
models = []

# API path to fetch available models
models_path = "/v1beta/models/"

# API path for chat completions
chat_path = "/v1beta/models/{model}:generateContent"


[headers]
# API key header - replace with your actual key
x-goog-api-key = "<your-api-key>"


[vars]

[chat_templates]

[chat_templates.""]
request = """
{
  "contents": [
    {%- for message in messages %}
    {%- if message.role == "system" %}
    {
      "role": "user",
      "parts": [{"text": "{{ message.content_type.content | default(value="System message") | replace(from='"', to='\\"') }}"}]
    },
    {
      "role": "model",
      "parts": [{"text": "I understand. I'll follow these instructions."}]
    }{%- if not loop.last %},{% endif %}
    {%- elif message.role == "user" %}
    {
      "role": "user",
      "parts": [{"text": "{{ message.content_type.content | default(value=message.content | default(value="User message")) | replace(from='"', to='\\"') }}"}]
    }{%- if not loop.last %},{% endif %}
    {%- elif message.role == "assistant" %}
    {
      "role": "model",
      "parts": [{"text": "{{ message.content_type.content | default(value=message.content | default(value="Assistant message")) | replace(from='"', to='\\"') }}"}]
    }{%- if not loop.last %},{% endif %}
    {%- elif message.role == "tool" %}
    {
      "role": "function",
      "parts": [{"functionResponse": {"name": "{{ message.tool_call_id }}", "response": {"result": "{{ message.content_type.content | default(value=message.content | default(value="Tool response")) | replace(from='"', to='\\"') }}"}}}]
    }{%- if not loop.last %},{% endif %}
    {%- endif %}
    {%- endfor %}
  ],
  {%- if tools %}
  "tools": [
    {
      "functionDeclarations": [
        {%- for tool in tools %}
        {
          "name": "{{ tool.function.name }}",
          "description": "{{ tool.function.description | default(value="") }}",
          "parameters": {{ tool.function.parameters | tojson }}
        }{%- if not loop.last %},{% endif %}
        {%- endfor %}
      ]
    }
  ],
  {%- endif %}
  "generationConfig": {
    {%- if max_tokens %}
    "maxOutputTokens": {{ max_tokens }}{%- if temperature %},{% endif %}
    {%- endif %}
    {%- if temperature %}
    "temperature": {{ temperature }}
    {%- endif %}
  }
}

"""
response = """
{
  "content": {{ candidates[0].content.parts[0].text | json }}
}

"""
